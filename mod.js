class t{constructor(t="",o=0,a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",c="cfhistuCFHISTU"){if(this.minLength=o,"number"!=typeof o)throw new TypeError(`Hashids: Provided 'minLength' has to be a number (is ${typeof o})`);if("string"!=typeof t)throw new TypeError(`Hashids: Provided 'salt' has to be a string (is ${typeof t})`);if("string"!=typeof a)throw new TypeError(`Hashids: Provided alphabet has to be a string (is ${typeof a})`);const g=Array.from(t),p=Array.from(a),d=Array.from(c);this.salt=g;const u=n(p);if(u.length<e)throw new Error(`Hashids: alphabet must contain at least ${e} unique characters, provided: ${u}`);this.alphabet=r(u,d);const y=h(d,u);let b,w;this.seps=l(y,g),(0===this.seps.length||this.alphabet.length/this.seps.length>s)&&(b=Math.ceil(this.alphabet.length/s),b>this.seps.length&&(w=b-this.seps.length,this.seps.push(...this.alphabet.slice(0,w)),this.alphabet=this.alphabet.slice(w))),this.alphabet=l(this.alphabet,g);const D=Math.ceil(this.alphabet.length/i);this.alphabet.length<3?(this.guards=this.seps.slice(0,D),this.seps=this.seps.slice(D)):(this.guards=this.alphabet.slice(0,D),this.alphabet=this.alphabet.slice(D)),this.guardsRegExp=f(this.guards),this.sepsRegExp=f(this.seps),this.allowedCharsRegExp=m([...this.alphabet,...this.guards,...this.seps])}encode(t,...e){return(e=Array.isArray(t)?t:[...null!=t?[t]:[],...e]).length?(e.every(o)||(e=e.map(t=>"bigint"==typeof t||"number"==typeof t?t:d(String(t)))),e.every(a)?this._encode(e).join(""):""):""}decode(t){return t&&"string"==typeof t&&0!==t.length?this._decode(t):[]}encodeHex(t){switch(typeof t){case"bigint":t=t.toString(16);break;case"string":if(!/^[0-9a-fA-F]+$/.test(t))return"";break;default:throw new Error(`Hashids: The provided value is neither a string, nor a BigInt (got: ${typeof t})`)}const e=u(t,12,t=>parseInt("1"+t,16));return this.encode(e)}decodeHex(t){return this.decode(t).map(t=>t.toString(16).slice(1)).join("")}_encode(t){let e=this.alphabet;const s=t.reduce((t,e,s)=>t+("bigint"==typeof e?Number(e%BigInt(s+100)):e%(s+100)),0);let i=[e[s%e.length]];const n=i.slice(),r=this.seps,h=this.guards;if(t.forEach((s,h)=>{const o=n.concat(this.salt,e);e=l(e,o);const a=c(s,e);if(i.push(...a),h+1<t.length){const t=a[0].codePointAt(0)+h,e="bigint"==typeof s?Number(s%BigInt(t)):s%t;i.push(r[e%r.length])}}),i.length<this.minLength){const t=(s+i[0].codePointAt(0))%h.length;if(i.unshift(h[t]),i.length<this.minLength){const t=(s+i[2].codePointAt(0))%h.length;i.push(h[t])}}const o=Math.floor(e.length/2);for(;i.length<this.minLength;){e=l(e,e),i.unshift(...e.slice(o)),i.push(...e.slice(0,o));const t=i.length-this.minLength;if(t>0){const e=t/2;i=i.slice(e,e+this.minLength)}}return i}isValidId(t){return this.allowedCharsRegExp.test(t)}_decode(t){if(!this.isValidId(t))throw new Error(`The provided ID (${t}) is invalid, as it contains characters that do not exist in the alphabet (${this.guards.join("")}${this.seps.join("")}${this.alphabet.join("")})`);const e=t.split(this.guardsRegExp),s=e[3===e.length||2===e.length?1:0];if(0===s.length)return[];const i=s[Symbol.iterator]().next().value,n=s.slice(i.length).split(this.sepsRegExp);let r=this.alphabet;const h=[];for(const t of n){const e=l(r,[i,...this.salt,...r].slice(0,r.length));h.push(g(Array.from(t),e)),r=e}return this._encode(h).join("")!==t?[]:h}}const e=16,s=3.5,i=12,n=t=>Array.from(new Set(t)),r=(t,e)=>t.filter(t=>!e.includes(t)),h=(t,e)=>t.filter(t=>e.includes(t)),o=t=>"bigint"==typeof t||!Number.isNaN(Number(t))&&Math.floor(Number(t))===t,a=t=>"bigint"==typeof t||t>=0&&Number.isSafeInteger(t);function l(t,e){if(0===e.length)return t;let s;const i=t.slice();for(let t=i.length-1,n=0,r=0;t>0;t--,n++){n%=e.length,r+=s=e[n].codePointAt(0);const h=(s+n+r)%t,o=i[t],a=i[h];i[h]=o,i[t]=a}return i}const c=(t,e)=>{const s=[];if("bigint"==typeof t){const i=BigInt(e.length);do{s.unshift(e[Number(t%i)]),t/=i}while(t>BigInt(0))}else do{s.unshift(e[t%e.length]),t=Math.floor(t/e.length)}while(t>0);return s},g=(t,e)=>t.reduce((s,i)=>{const n=e.indexOf(i);if(-1===n)throw new Error(`The provided ID (${t.join("")}) is invalid, as it contains characters that do not exist in the alphabet (${e.join("")})`);if("bigint"==typeof s)return s*BigInt(e.length)+BigInt(n);const r=s*e.length+n;if(Number.isSafeInteger(r))return r;if("function"==typeof BigInt)return BigInt(s)*BigInt(e.length)+BigInt(n);throw new Error("Unable to decode the provided string, due to lack of support for BigInt numbers in the current environment")},0),p=/^\+?[0-9]+$/,d=t=>p.test(t)?parseInt(t,10):NaN,u=(t,e,s)=>Array.from({length:Math.ceil(t.length/e)},(i,n)=>s(t.slice(n*e,(n+1)*e))),f=t=>new RegExp(t.map(t=>y(t)).sort((t,e)=>e.length-t.length).join("|")),m=t=>new RegExp(`^[${t.map(t=>y(t)).sort((t,e)=>e.length-t.length).join("")}]+$`),y=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),b=["/"],w=b,D=["\\","/"];class S{constructor(t,e){this.trailingSlash=!1,this.separators=e||function(){switch(Deno.build.os){case"linux":case"darwin":return["/"];case"windows":return["\\","/"];default:throw Error("unexpected platform")}}(),t?(this.trailingSlash="/"===t[0],this.pathElements=S.explodePath(this.separators,t)):this.pathElements=new Array}static explodePath(t,e){const s=e.split(""),i=new Array;let n="";for(let e=0;e<s.length;e++){let r=s[e];-1===t.indexOf(r)?n+=r:n&&(i.push(n),n="")}return i.push(n),i}toString(t="",e="",s){let i=this.pathElements.join(s||this.separators[0]);return i=t.concat(i.concat(e)),this.trailingSlash?"/".concat(i):i}push(t){return S.explodePath(this.separatorList,t).forEach(t=>this.pathElements.push(t)),this}pop(){return this.del()}del(){return this.pathElements.pop(),this}findLastValidNode(t){let e=this.toString();const s=new S(e);if(t)for(;!s.exists&&!s.isFile;)s.del();else for(;!s.exists;)s.del();return s}static diff(t,e){const s=t.elements,i=e.elements;return s.filter(t=>-1===i.indexOf(t))}get ext(){const t=this.pathElements[this.pathElements.length-1],e=t.split("").lastIndexOf(".");return 0!==e&&-1!==e?t.substr(e):null}get exists(){try{return Deno.statSync(this.toString()),!0}catch(t){if(t instanceof Deno.errors.PermissionDenied)throw t;return!1}}get isFile(){try{return Deno.statSync(this.toString()).isFile}catch(t){if(t instanceof Deno.errors.PermissionDenied)throw t;return!1}}get isDir(){try{return Deno.statSync(this.toString()).isDirectory}catch(t){if(t instanceof Deno.errors.PermissionDenied)throw t;return!1}}get isSymlink(){try{return Deno.statSync(this.toString()).isSymlink}catch(t){if(t instanceof Deno.errors.PermissionDenied)throw t;return!1}}get elements(){return this.pathElements}set elements(t){this.pathElements=t}set separatorList(t){this.separators=t}get separatorList(){return this.separators}static fromCWD(){return new S(Deno.cwd())}mkDirSync(t=!1){if(t||Deno.mkdirSync(this.toString()),this.exists&&this.isDir)return!0;let e=this.findLastValidNode(),s=S.diff(this,e);for(let t=0;t<s.length;t++)e.push(s[t]),Deno.mkdirSync(e.toString());return!0}async mkDir(t=!1){if(t||await Deno.mkdir(this.toString()),this.exists&&this.isDir)return!0;let e=this.findLastValidNode(),s=S.diff(this,e);for(let t=0;t<s.length;t++)e.push(s[t]),await Deno.mkdir(e.toString());return!0}async rm(t=!1){await Deno.remove(this.toString(),{recursive:t})}rmSync(t=!1){Deno.removeSync(this.toString(),{recursive:t})}static genTmpPath(e=4096,s="",i="",n=".",r){const h=Math.floor(Math.random()*e),o=new t(h.toString(),10);let a;if(s=s?s+n:"",i=i?n+i:"",r)a=r;else switch(Deno.build.os){case"windows":a=Deno.env.get("TMP")||Deno.env.get("TEMP");break;case"darwin":case"linux":a=Deno.env.get("TMPDIR")||"/tmp";break;default:throw new Error("could not determine the system's temporary folder path, you can try specifying a tmpDir param")}return new S(a).push(s+o.encode(h)+i)}}export default S;export{w as LINUX_SEPS,S as Path,b as UNIX_SEPS,D as WINDOWS_SEPS};
//# sourceMappingUrl=mod.js.map
